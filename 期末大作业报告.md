# 校园二手交易平台期末大作业报告

## 1. 项目概述

### 1.1 项目背景
随着高校学生数量的增加，校园内二手物品交易需求日益增长。传统的线下交易方式效率低下，信息流通不畅，导致大量可用资源被浪费。为了解决这一问题，我们设计并实现了一个校园二手交易平台，为学生提供便捷、安全的二手物品交易服务。

### 1.2 项目目标
- 提供便捷的二手物品发布、浏览、搜索功能
- 实现安全的交易流程和支付系统
- 支持用户间的即时通讯和沟通
- 建立信用评价机制，提高交易安全性
- 提供管理功能，方便管理员维护平台秩序

### 1.3 技术栈
- **前端**：Vue.js 2.6、Element UI、Axios
- **后端**：Spring Boot 2.4、MyBatis
- **数据库**：MySQL 8.0
- **开发工具**：IntelliJ IDEA、VS Code
- **版本控制**：Git

## 2. 需求分析

### 2.1 功能需求

#### 2.1.1 用户管理模块
- 用户注册、登录、注销
- 用户信息管理（个人资料、头像、密码修改）
- 用户身份验证

#### 2.1.2 商品管理模块
- 商品发布（标题、描述、价格、图片、分类、地理位置）
- 商品浏览、搜索、筛选
- 商品详情查看
- 商品收藏与取消收藏
- 商品状态管理（在售、已售、下架）

#### 2.1.3 订单管理模块
- 订单创建
- 订单支付
- 订单状态管理（待支付、已支付、待发货、已发货、已完成、已取消）
- 订单查询与历史记录

#### 2.1.4 交易管理模块
- 交易沟通（在线聊天）
- 交易评价
- 纠纷处理

#### 2.1.5 地址管理模块
- 收货地址添加、修改、删除
- 默认地址设置

#### 2.1.6 管理员模块
- 用户管理（查询、禁用、解禁）
- 商品管理（审核、下架）
- 订单管理（查询、处理）
- 系统统计与报表

### 2.2 非功能需求
- **性能要求**：页面加载时间 < 2秒，并发用户数支持 > 1000
- **安全性**：用户密码加密存储，接口权限验证，防止SQL注入
- **可用性**：系统可用率 > 99%，提供友好的错误提示
- **兼容性**：支持主流浏览器（Chrome、Firefox、Safari、Edge）

## 3. 系统设计

### 3.1 系统架构设计
采用前后端分离的架构设计：

```
┌─────────────────┐     ┌─────────────────┐     ┌─────────────────┐
│    前端应用     │────▶│    后端API      │────▶│    数据库       │
│  (Vue.js +      │     │  (Spring Boot)  │     │  (MySQL)        │
│   Element UI)   │◀────│                 │◀────│                 │
└─────────────────┘     └─────────────────┘     └─────────────────┘
```

### 3.2 数据库设计

#### 3.2.1 核心数据表

1. **用户表（sh_user）**：存储用户基本信息
2. **闲置物品表（sh_idle_item）**：存储商品信息
3. **订单表（sh_order）**：存储订单信息
4. **订单地址表（sh_order_address）**：存储订单收货地址
5. **消息表（sh_message）**：存储用户间的消息
6. **收藏表（sh_favorite）**：存储用户收藏的商品
7. **地址表（sh_address）**：存储用户的收货地址
8. **管理员表（sh_admin）**：存储管理员信息

### 3.3 模块设计

#### 3.3.1 前端模块
- **首页模块**：展示热门商品、推荐商品
- **商品模块**：商品列表、搜索、详情
- **购物车模块**：商品加入购物车、结算
- **订单模块**：订单创建、查询、管理
- **用户中心模块**：个人信息、我的商品、我的订单、我的收藏
- **消息模块**：聊天记录、消息通知

#### 3.3.2 后端模块
- **用户接口**：用户注册、登录、信息管理
- **商品接口**：商品发布、查询、管理
- **订单接口**：订单创建、支付、管理
- **消息接口**：消息发送、接收、查询
- **文件接口**：图片上传、下载

## 4. 系统实现

### 4.1 前端实现

#### 4.1.1 项目结构
```
school-trade-frontend/
├── src/
│   ├── api/          # API接口封装
│   ├── assets/       # 静态资源
│   ├── components/   # 组件
│   ├── router/       # 路由配置
│   ├── utils/        # 工具函数
│   ├── App.vue       # 根组件
│   └── main.js       # 入口文件
├── public/           # 公共资源
├── package.json      # 项目配置
└── vue.config.js     # Vue配置
```

#### 4.1.2 核心组件
- **商品列表组件**：展示商品列表，支持搜索和筛选
- **商品详情组件**：展示商品详细信息，支持收藏和下单
- **订单创建组件**：生成订单，选择收货地址
- **聊天组件**：实现用户间的实时通讯
- **用户中心组件**：管理用户个人信息和相关数据

#### 4.1.3 路由配置
```javascript
const routes = [
  { path: '/', component: Home },
  { path: '/login', component: Login },
  { path: '/register', component: Register },
  { path: '/goods', component: GoodsList },
  { path: '/goods/:id', component: GoodsDetail },
  { path: '/cart', component: Cart },
  { path: '/order', component: OrderList },
  { path: '/order/create/:goodsId', component: OrderCreate },
  { path: '/user', component: UserCenter, meta: { requiresAuth: true } },
  { path: '/message', component: Message, meta: { requiresAuth: true } },
  { path: '/admin', component: Admin, meta: { requiresAuth: true, requiresAdmin: true } },
]
```

### 4.2 后端实现

#### 4.2.1 项目结构
```
school-trade-backend/
├── src/main/
│   ├── java/com/shanzhu/st/
│   │   ├── controller/   # 控制器
│   │   ├── entity/       # 实体类
│   │   ├── mapper/       # Mapper接口
│   │   ├── service/      # 服务层
│   │   └── Application.java # 入口类
│   └── resources/
│       ├── mapper/       # MyBatis映射文件
│       └── application.yml # 配置文件
├── pom.xml              # Maven配置
└── DB_School_Trade.sql  # 数据库脚本
```

#### 4.2.2 核心功能实现

**用户登录功能**
```java
@PostMapping("/login")
public Result<User> login(@RequestBody User user) {
    User loginUser = userService.login(user);
    if (loginUser != null) {
        return Result.success(loginUser);
    } else {
        return Result.error("用户名或密码错误");
    }
}
```

**商品发布功能**
```java
@PostMapping("/publish")
public Result<IdleItem> publishIdleItem(@RequestBody IdleItem idleItem) {
    boolean result = idleItemService.publishIdleItem(idleItem);
    if (result) {
        return Result.success(idleItem);
    } else {
        return Result.error("发布失败");
    }
}
```

**订单创建功能**
```java
@PostMapping("/create")
public Result<Order> createOrder(@RequestBody Order order) {
    Order newOrder = orderService.createOrder(order);
    if (newOrder != null) {
        return Result.success(newOrder);
    } else {
        return Result.error("创建订单失败");
    }
}
```

## 5. 测试与调试

### 5.1 测试方法
- **单元测试**：对核心功能模块进行测试
- **集成测试**：测试前后端接口的交互
- **系统测试**：对整个系统的功能进行测试
- **用户测试**：邀请同学进行实际使用测试

### 5.2 测试用例

#### 5.2.1 用户登录测试
| 测试用例 | 输入 | 预期输出 | 实际输出 | 结果 |
|---------|------|---------|---------|------|
| 正确用户名密码 | username: test, password: 123456 | 登录成功，返回用户信息 | 登录成功，返回用户信息 | 通过 |
| 错误用户名 | username: wrong, password: 123456 | 登录失败，提示错误 | 登录失败，提示错误 | 通过 |
| 错误密码 | username: test, password: wrong | 登录失败，提示错误 | 登录失败，提示错误 | 通过 |

#### 5.2.2 商品发布测试
| 测试用例 | 输入 | 预期输出 | 实际输出 | 结果 |
|---------|------|---------|---------|------|
| 完整信息 | 标题、描述、价格、图片、分类、地址 | 发布成功，返回商品信息 | 发布成功，返回商品信息 | 通过 |
| 缺少必填字段 | 缺少标题 | 发布失败，提示缺少必填字段 | 发布失败，提示缺少必填字段 | 通过 |
| 图片过大 | 图片大小超过200MB | 上传失败，提示文件过大 | 上传失败，提示文件过大 | 通过 |

### 5.3 调试过程
在开发过程中，我们遇到了一些问题并进行了调试：

1. **跨域问题**：前端无法访问后端API，通过在后端配置CORS解决
2. **图片上传问题**：上传的图片无法正确显示，通过调整文件路径和权限解决
3. **订单状态同步问题**：订单状态更新不及时，通过优化数据库设计和业务逻辑解决
4. **性能问题**：页面加载缓慢，通过图片压缩、代码优化和缓存策略解决

## 6. 部署与运行

### 6.1 环境要求
- **操作系统**：Windows Server 2016/2019/2022 或 Linux
- **Java版本**：JDK 1.8 或以上
- **Node.js版本**：14.0 或以上
- **MySQL版本**：8.0 或以上

### 6.2 部署步骤

#### 6.2.1 数据库部署
1. 创建数据库：`CREATE DATABASE DB_School_trade CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;`
2. 导入数据库脚本：`mysql -u root -p DB_School_trade < DB_School_Trade.sql`

#### 6.2.2 后端部署
1. 修改配置文件：`application.yml` 中的数据库连接信息
2. 构建项目：`mvn clean package -DskipTests`
3. 启动服务：`java -jar school-trade-backend-1.0.0.jar`

#### 6.2.3 前端部署
1. 修改配置文件：`vue.config.js` 中的后端API地址
2. 安装依赖：`npm install`
3. 构建项目：`npm run build`
4. 部署静态资源：将 `dist` 目录部署到Nginx或Tomcat

### 6.3 运行效果
系统成功部署后，可以通过浏览器访问：`http://localhost:8080`

## 7. 与大模型的协作过程

### 7.1 协作概述
在本次项目开发中，我与大模型进行了深度协作，从需求分析到系统实现的各个阶段都得到了大模型的支持和帮助。大模型不仅提供了技术指导，还协助完成了文档编写、代码实现、问题解决等工作。

### 7.2 协作细节

#### 7.2.1 需求分析阶段
- **任务**：明确项目需求，编写需求说明书
- **大模型协助**：
  - 提供需求分析模板和方法
  - 帮助梳理功能模块和非功能需求
  - 指导编写完整的需求说明书

#### 7.2.2 系统设计阶段
- **任务**：系统架构设计、数据库设计、模块设计
- **大模型协助**：
  - 提供系统架构设计建议
  - 帮助设计数据库表结构和关系
  - 指导模块划分和接口设计
  - 协助编写系统设计文档

#### 7.2.3 系统实现阶段
- **任务**：前端和后端代码实现
- **大模型协助**：
  - 提供代码示例和实现思路
  - 帮助解决技术难题
  - 指导代码优化和重构
  - 协助进行代码调试

#### 7.2.4 测试与调试阶段
- **任务**：编写测试用例，进行系统测试和调试
- **大模型协助**：
  - 提供测试方法和测试用例模板
  - 帮助分析和解决测试中发现的问题
  - 指导性能优化和调试技巧

#### 7.2.5 部署与文档阶段
- **任务**：系统部署和文档编写
- **大模型协助**：
  - 提供部署方案和步骤
  - 指导编写部署说明文档
  - 帮助编写期末大作业报告
  - 提供项目总结和展望的思路

### 7.3 协作效果
通过与大模型的协作，我不仅顺利完成了项目开发，还学到了很多新技术和开发方法。大模型的帮助大大提高了开发效率，减少了错误和问题的发生，使项目能够按时高质量完成。

### 7.4 协作体会
- **优势**：大模型可以快速提供信息和建议，解决技术难题，提高开发效率
- **局限性**：大模型的建议需要结合实际情况进行验证和调整，不能完全依赖
- **未来展望**：随着大模型技术的发展，它将在软件开发中发挥更大的作用，成为开发者的得力助手

## 8. 总结与展望

### 8.1 项目总结
本次校园二手交易平台项目的开发，成功实现了一个功能完整、性能稳定的校园二手交易系统。系统涵盖了用户管理、商品管理、订单管理、交易管理等核心功能，满足了校园内二手物品交易的需求。

通过这个项目，我不仅掌握了前后端分离开发的技术栈，还学会了如何进行需求分析、系统设计、代码实现、测试调试和部署运行。同时，通过与大模型的协作，我也体验到了人工智能在软件开发中的应用和潜力。

### 8.2 项目亮点
- 采用前后端分离架构，提高了系统的可维护性和扩展性
- 实现了完整的交易流程，保障了交易的安全性和可靠性
- 提供了实时通讯功能，方便用户之间的沟通和交流
- 建立了信用评价机制，提高了交易的信任度
- 提供了完善的管理功能，方便管理员维护平台秩序

### 8.3 存在的问题与不足
- 系统界面设计不够美观，用户体验有待提高
- 实时通讯功能不够完善，缺少推送通知
- 支付系统仅支持模拟支付，未接入真实支付接口
- 系统性能和安全性还需要进一步优化

### 8.4 未来展望
- 优化界面设计，提高用户体验
- 完善实时通讯功能，增加推送通知
- 接入真实支付接口，支持在线支付
- 加强系统性能和安全性优化
- 增加更多功能，如商品推荐、数据分析等

### 8.5 个人收获
通过本次项目开发，我不仅提高了自己的编程能力和技术水平，还学会了如何进行团队协作和项目管理。同时，通过与大模型的协作，我也了解了人工智能在软件开发中的应用，为未来的学习和工作打下了坚实的基础。

